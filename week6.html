<!--DOCTYPE HTML-->
<html>
<head>
	<title>
		第六週作業
	</title>
	
<script language ="JavaScript">
	//-----------------------------------------//
			function refreshPage() //Refresh Button
			{
				window.location.reload();
			} 
	//----------------------------------------//

     function getDegree (name, users_name,users_degree){
	     var degrees ="";
		 for(i=0;i<users_name.length;i++){
		 if(users_name[i]==name){
		      degrees =users_degree[i];
			  }
		   }
		   return degrees;
		   }
		   
		   function getBoughtBook(books){
		       var index =prompt("購買書籍號碼"+"\n1."+books[0]+"\n2."+books[1]+"\n3."+books[2]+"\n4."+books[3]+"\n5."+"結帳");
		       return index;
		   }
		   
		   function sum (index ,total){
		       var book_cost = new Array (100,120,140,150);
			   if(index!=5){
			        return total + book_cost[index-1];
			    }else{
				    return total;
			    }
			}
			function discount(degree){
			    var discountTotal =new Array(0.7,0.8,0.85,0.9);
			
				if(degree=="鑽石"){
				     return discountTotal[0];
				}else if(degree=="白金"){
				     return discountTotal[1];
			    }else if(degree=="黃金"){
				     return discountTotal[2];
				}else if(degree=="一般"){
				     return discountTotal[3];
			    }
			}
			function lv_coupon(degree){
				var diamond_coupon = new Array(50,35,25,10,0);
				var platinum_coupon = new Array(40,25,20,10,0);
				var gold_coupon = new Array(30,20,15,10,0);
				var gen_coupon = new Array(30,20,15,10,0);
				
				if(degree=="鑽石"){
					 select = prompt("請選擇愈使用的折價券：" + "\n1."+diamond_coupon[0]+"\n2."+diamond_coupon[1]+"\n3."+diamond_coupon[2]+"\n4."+diamond_coupon[3] +"\n5."+diamond_coupon[4]);
				     left_coupon(select, diamond_coupon);
					 return diamond_coupon[select-1];
				}else if(degree=="白金"){
					 select = prompt("請選擇愈使用的折價券：" + "\n1."+platinum_coupon[0]+"\n2."+platinum_coupon[1]+"\n3."+platinum_coupon[2]+"\n4."+platinum_coupon[3]+"\n5."+diamond_coupon[4]);
				     left_coupon(select, platinum_coupon);
					 return platinum_coupon[select-1];
			    }else if(degree=="黃金"){
					 select = prompt("請選擇愈使用的折價券：" + "\n1."+gold_coupon[0]+"\n2."+gold_coupon[1]+"\n3."+gold_coupon[2]+"\n4."+gold_coupon[3]+"\n5."+diamond_coupon[4]);
				      left_coupon(select, gold_coupon);
					 return gold_coupon[select-1];
				}else if(degree=="一般"){
					 select = prompt("請選擇愈使用的折價券：" + "\n1."+gen_coupon[0]+"\n2."+gen_coupon[1]+"\n3."+gen_coupon[2]+"\n4."+gen_coupon[3]+"\n5."+diamond_coupon[4]);
				     left_coupon(select, gen_coupon);
					 return gen_coupon[select-1];
			    }
			}
			
			function left_coupon(select,x){
				for(i=1; i<x.length ; i++){
					if(i==x){
						
					}else{
						document.write("<br>"+"$"+x[((i-1)+1)]);
					}
				}
			}
			
			function discount_coupon(index){
			    var coupon = new Array(30,25);
				return coupon[index-1];
				}
			
</script>
	
</head>
	<body bgcolor = "#FFE4CA" vlink = "#28FF28" alink = "00EC00" >
		<hr size = "8" align = "center" width = "55%" color = "#0000ff">   <!--Horizontal rule setting-->
			<p align="center">   <!--Paragrah setting-->
				<b><font face = "DFKai-sb" color = "#0000ff" size = "3">  <!--text font setting-->
					學號：2106105120 </b> <br>
					<i>姓名：楊宙謨</i> <br>
					<u>第六次作業</u> </font>
			</p>
		<hr size = "8" align = "center" width = "55%" color = "#0000ff"> <br>
		<p align="center"> 
		<font face = "DFKai-sb" color = "#0000ff" size = "5">
		<script language = "Javascript">
			var user_name = new Array("小王","小華","小明","張三","李四","王五");
			var user_degree = new Array("鑽石","一般","白金","一般","黃金","黃金",);
			var books=new Array("水滸傳","三國演義","西遊記","金瓶梅");
			
			var total =0;
			var boughtBooks =new Array();
			var numberOfBooks =0;
			
			user =prompt("歡迎光臨JavaScript書城，請輸入使用者" + "\n" + user_name);
			var degree = getDegree(user,user_name,user_degree);
		
			document.write("歡迎光臨JavaScript書城！<br>");
			document.write("會員："+user+"("+degree+"等級"+")"+"<br>");
			document.write("剩餘未使用折價券：");
			
			var index = getBoughtBook(books);
			while(index!=5){
			total = sum(index,total);
			boughtBooks[numberOfBooks]=books[index-1];
			numberOfBooks++;
			index = getBoughtBook(books);
			}
			//coupon = prompt("請選擇折價券\n1：30\n2：25");
	
			total = total*parseFloat(discount(degree)) /*- discount_coupon(coupon)*/ - lv_coupon(degree) ;
			document.write("<br>"+"共購買了書籍："+boughtBooks+"<br>");
			document.write("總價："+"$"+total+"元");
		</script> <br>
		</font>
		</p>
		<center>
		<button type="submit"  onClick="refreshPage()" style = "width：160px; height：50px; font-size：32px " > 重新整理 </button>
		</center>
	</body>
</html>
